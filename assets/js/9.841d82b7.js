(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{205:function(t,s,a){t.exports=a.p+"assets/img/network-diagram.4e675e4e.jpg"},206:function(t,s,a){t.exports=a.p+"assets/img/http-architect.40754fda.jpg"},296:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"http"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[t._v("#")]),t._v(" HTTP")]),t._v(" "),n("p",[t._v("Node çš„ http æ¨¡å—åŒ…å«å¯¹ HTTP å¤„ç†çš„å°è£…ã€‚åœ¨ Node ä¸­ï¼ŒHTTP æœåŠ¡ç»§æ‰¿è‡ª TCP æœåŠ¡å™¨ï¼ˆ"),n("router-link",{attrs:{to:"/network/net.html"}},[t._v("net æ¨¡å—")]),t._v("ï¼‰ï¼Œå®ƒèƒ½å¤Ÿä¸å¤šä¸ªå®¢æˆ·ç«¯ä¿æŒè¿æ¥ï¼Œç”±äºå…¶é‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„å½¢å¼ï¼Œå¹¶ä¸ä¸ºæ¯ä¸€ä¸ªè¿æ¥åˆ›å»ºé¢å¤–çš„çº¿ç¨‹æˆ–è¿›ç¨‹ï¼Œä¿æŒå¾ˆä½çš„å†…å­˜å ç”¨ï¼Œæ‰€ä»¥èƒ½å®ç°é«˜å¹¶å‘ã€‚HTTP æœåŠ¡ä¸ TCP æœåŠ¡æ¨¡å‹æœ‰åŒºåˆ«çš„åœ°æ–¹åœ¨äºï¼Œåœ¨å¼€å¯ keepalive åï¼Œä¸€ä¸ª TCP ä¼šè¯å¯ä»¥ç”¨äºå¤šæ¬¡è¯·æ±‚å’Œå“åº”ã€‚TCP æœåŠ¡ä»¥ connection ä¸ºå•ä½è¿›è¡ŒæœåŠ¡ï¼ŒHTTP æœåŠ¡ä»¥ request ä¸ºå•ä½è¿›è¡ŒæœåŠ¡ã€‚http æ¨¡å—å³æ˜¯å°† connection åˆ° request çš„è¿‡ç¨‹è¿›è¡Œäº†å°è£…ã€‚")],1),t._v(" "),n("p",[t._v("Node.js é‡‡ç”¨çš„ç½‘ç»œè¯·æ±‚å¤„ç†æ¨¡å‹æ˜¯ I/O å¤šè·¯å¤ç”¨ï¼Œä¸ä¼ ç»Ÿçš„ä¸»ä»å¤šçº¿ç¨‹å¹¶å‘æ¨¡å‹åŒºåˆ«ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("åªä½¿ç”¨æœ‰é™çš„çº¿ç¨‹æ•°ï¼ˆ1 ä¸ªï¼‰ï¼Œæ‰€ä»¥å ç”¨ç³»ç»Ÿèµ„æºå¾ˆå°‘")]),t._v(" "),n("li",[t._v("æ“ä½œç³»ç»Ÿçº§çš„å¼‚æ­¥ I/O æ”¯æŒï¼Œå¯ä»¥å‡å°‘ç”¨æˆ·æ€/å†…æ ¸æ€åˆ‡æ¢ï¼Œå¹¶ä¸”æœ¬èº«æ€§èƒ½æ›´é«˜ï¼ˆå› ä¸ºç›´æ¥ä¸ç½‘å¡é©±åŠ¨äº¤äº’ï¼‰")]),t._v(" "),n("li",[t._v("JavaScript å¤©ç”Ÿå…·æœ‰ä¿æŠ¤ç¨‹åºæ‰§è¡Œç°åœºçš„èƒ½åŠ›ï¼ˆé—­åŒ…ï¼‰ï¼Œä¼ ç»Ÿæ¨¡å‹è¦ä¹ˆä¾èµ–åº”ç”¨ç¨‹åºè‡ªå·±ä¿å­˜ç°åœºï¼Œæˆ–è€…ä¾èµ–çº¿ç¨‹åˆ‡æ¢æ—¶è‡ªåŠ¨å®Œæˆ")])]),t._v(" "),n("h2",{attrs:{id:"http-createserver"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-createserver"}},[t._v("#")]),t._v(" http.createServer")]),t._v(" "),n("p",[t._v("é€šè¿‡ "),n("code",[t._v("http.createServer")]),t._v(" å·¥å‚æ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œè¿”å› "),n("code",[t._v("http.Server")]),t._v(" å¯¹è±¡å®ä¾‹ï¼Œè¯¥å®ä¾‹ç»§æ‰¿è‡ª "),n("code",[t._v("net.Server")]),t._v("ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("requestListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("äº‹å®ä¸Šï¼ŒHTTP åè®®ç¡®å®æ˜¯åŸºäº TCP åè®®å®ç°çš„ã€‚")]),t._v(" "),n("p",[t._v("craeteServer çš„å¯é€‰å‚æ•° requestListener ç”¨äºç›‘å¬ request äº‹ä»¶ï¼›å¦å¤–ï¼Œå®ƒä¹Ÿç›‘å¬ connection äº‹ä»¶ï¼Œåªä¸è¿‡å›è°ƒå‡½æ•°æ˜¯ "),n("code",[t._v("http.Server")]),t._v(" è‡ªå·±å®ç°çš„ã€‚ç„¶åè°ƒç”¨ listen è®© "),n("code",[t._v("http.Server")]),t._v(" å¯¹è±¡åœ¨ç«¯å£ 3333 ä¸Šç›‘å¬è¿æ¥è¯·æ±‚å¹¶æœ€ç»ˆåˆ›å»º TCP å¯¹è±¡ï¼Œç”± "),n("code",[t._v("tcp_wrap.h")]),t._v(" å®ç°ã€‚æœ€åä¼šè°ƒç”¨ TCP å¯¹è±¡çš„ listen æ–¹æ³•ï¼Œè¿™æ‰æ˜¯çœŸæ­£åœ¨æŒ‡å®šç«¯å£å¼€å§‹æä¾›æœåŠ¡ã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(205),alt:"network diagram"}})]),t._v(" "),n("p",[t._v("æ¶‰åŠåˆ° C++çš„ç±»å¤§å¤šæ˜¯å¯¹ libuv åšäº†ä¸€å±‚åŒ…è£…å¹¶å…¬å¸ƒç»™ JavaScriptï¼Œæ‰€ä»¥ä¸åœ¨è¿™é‡Œç‰¹åˆ«åˆ—å‡ºã€‚æˆ‘ä»¬æœ‰å¿…è¦æ "),n("code",[t._v("http-parser")]),t._v("ï¼Œå®ƒæ˜¯ç”¨æ¥è§£æ HTTP è¯·æ±‚/å“åº”æ¶ˆæ¯çš„ï¼Œæœ¬èº«ååˆ†é«˜æ•ˆï¼šæ²¡æœ‰ä»»ä½•ç³»ç»Ÿè°ƒç”¨ï¼Œæ²¡æœ‰å†…å­˜åˆ†é…æ“ä½œï¼Œçº¯ C å®ç°ã€‚")]),t._v(" "),n("h2",{attrs:{id:"å‘é€è¯·æ±‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‘é€è¯·æ±‚"}},[t._v("#")]),t._v(" å‘é€è¯·æ±‚")]),t._v(" "),n("p",[t._v("http æ¨¡å—å¯ä»¥é€šè¿‡ "),n("code",[t._v("get")]),t._v(" å’Œ "),n("code",[t._v("request")]),t._v(" æ–¹æ³•å‘é€ HTTP è¯·æ±‚ã€‚")]),t._v(" "),n("h3",{attrs:{id:"http-get"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-get"}},[t._v("#")]),t._v(" http.get")]),t._v(" "),n("p",[n("code",[t._v("http.get")]),t._v(" æ–¹æ³•ä¸»è¦ç”¨äºå‘å‡º GET è¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("ç”±äºå¤§å¤šæ•°è¯·æ±‚éƒ½æ˜¯æ²¡æœ‰ä¸»ä½“çš„ GET è¯·æ±‚ï¼Œæ‰€ä»¥ Node.js æä¾›äº†è¿™ä¸ªä¾¿æ·çš„æ–¹æ³•ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("è¿™ä¸ªæ–¹æ³•ä¸ "),n("code",[t._v("http.request")]),t._v(" æ–¹æ³•çš„åŒºåˆ«åœ¨äºï¼Œå®ƒå°†æ–¹æ³•è®¾ç½®ä¸º GET å¹¶è‡ªåŠ¨è°ƒç”¨ "),n("code",[t._v("req.end()")]),t._v("ã€‚")]),t._v(" "),n("p",[n("code",[t._v("callback")]),t._v(" è°ƒç”¨æ—¶åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ "),n("router-link",{attrs:{to:"/network/http-incoming-message.html"}},[t._v("http.IncomingMessage")]),t._v(" çš„å®ä¾‹ã€‚")],1),t._v(" "),n("h3",{attrs:{id:"http-request"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-request"}},[t._v("#")]),t._v(" http.request")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("é…ç½®å¯¹è±¡ options å±æ€§ï¼š")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("å±æ€§")]),t._v(" "),n("th",[t._v("è¯´æ˜")]),t._v(" "),n("th",[t._v("é»˜è®¤å€¼")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("protocol")]),t._v(" "),n("td",[t._v("ä½¿ç”¨åè®®")]),t._v(" "),n("td",[n("code",[t._v("'http'")])])]),t._v(" "),n("tr",[n("td",[t._v("host")]),t._v(" "),n("td",[t._v("è¯·æ±‚å‘é€è‡³çš„æœåŠ¡å™¨çš„åŸŸåæˆ– IP åœ°å€")]),t._v(" "),n("td",[n("code",[t._v("'localhost'")])])]),t._v(" "),n("tr",[n("td",[t._v("hostname")]),t._v(" "),n("td",[t._v("host çš„åˆ«å")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("family")]),t._v(" "),n("td",[t._v("IP åœ°å€æ—ï¼ˆæœ‰æ•ˆå€¼ä¸º 4 æˆ– 6ï¼‰")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("port")]),t._v(" "),n("td",[t._v("è¿œç¨‹æœåŠ¡å™¨çš„ç«¯å£")]),t._v(" "),n("td",[t._v("80")])]),t._v(" "),n("tr",[n("td",[t._v("localAddress")]),t._v(" "),n("td",[t._v("ä¸ºç½‘ç»œè¿æ¥ç»‘å®šçš„æœ¬åœ°æ¥å£")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("socketPath")]),t._v(" "),n("td",[t._v("Unix åŸŸå¥—æ¥å­—")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("method")]),t._v(" "),n("td",[t._v("HTTP è¯·æ±‚æ–¹æ³•")]),t._v(" "),n("td",[n("code",[t._v("'GET'")])])]),t._v(" "),n("tr",[n("td",[t._v("path")]),t._v(" "),n("td",[t._v("è¯·æ±‚è·¯å¾„")]),t._v(" "),n("td",[n("code",[t._v("'/'")])])]),t._v(" "),n("tr",[n("td",[t._v("headers")]),t._v(" "),n("td",[t._v("åŒ…å«è¯·æ±‚å¤´çš„å¯¹è±¡")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("auth")]),t._v(" "),n("td",[t._v("åŸºæœ¬çš„èº«ä»½éªŒè¯")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("agent")]),t._v(" "),n("td",[t._v("æ§åˆ¶ Agent çš„è¡Œä¸º")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("createConnection")]),t._v(" "),n("td",[t._v("å½“ agent æœªä½¿ç”¨æ—¶ï¼Œç”¨æ¥ä¸ºè¯·æ±‚ç”Ÿæˆå¥—æ¥å­—æˆ–æµçš„å‡½æ•°")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("timeout")]),t._v(" "),n("td",[t._v("æŒ‡å®šå¥—æ¥å­—è¶…æ—¶çš„æ•°å€¼")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("setHost")]),t._v(" "),n("td",[t._v("æ˜¯å¦è‡ªåŠ¨æ·»åŠ  Host è¯·æ±‚å¤´")]),t._v(" "),n("td",[t._v("true")])])])]),t._v(" "),n("p",[t._v("å‚æ•° "),n("code",[t._v("url")]),t._v(" å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ– URL å¯¹è±¡ã€‚")]),t._v(" "),n("ul",[n("li",[t._v("å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šè‡ªåŠ¨ä½¿ç”¨ "),n("code",[t._v("url.parse()")]),t._v(" è§£æ")]),t._v(" "),n("li",[t._v("å¦‚æœæ˜¯ URL å¯¹è±¡ï¼Œåˆ™ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºæ™®é€šçš„ "),n("code",[t._v("options")]),t._v(" å¯¹è±¡")])]),t._v(" "),n("p",[t._v("å¦‚æœåŒæ—¶åˆ¶å®šäº† "),n("code",[t._v("url")]),t._v(" å’Œ "),n("code",[t._v("options")]),t._v("ï¼Œåˆ™å¯¹è±¡ä¼šè¢«åˆå¹¶ï¼Œå…¶ä¸­ "),n("code",[t._v("options")]),t._v(" å±æ€§ä¼˜å…ˆã€‚")]),t._v(" "),n("p",[t._v("å¯é€‰çš„ "),n("code",[t._v("callback")]),t._v(" å‚æ•°ä¼šä½œä¸ºå•æ¬¡ç›‘å¬å™¨è¢«æ·»åŠ åˆ° "),n("code",[t._v("response")]),t._v(" äº‹ä»¶ä¸­ã€‚")]),t._v(" "),n("p",[n("code",[t._v("http.request()")]),t._v(" æ”¾å› "),n("router-link",{attrs:{to:"/network/http-client-request.html"}},[t._v("http.ClientRequest")]),t._v(" ç±»çš„å®ä¾‹ã€‚ClientRequest å®ä¾‹æ˜¯ä¸€ä¸ªå¯å†™æµã€‚å¦‚æœéœ€è¦æ—¶å“ŸåŠŸèƒ½ POST è¯·æ±‚ä¸Šä¼ æ–‡ä»¶ï¼Œåˆ™å†™å…¥ ClientRequest å¯¹è±¡ã€‚")],1),t._v(" "),n("h2",{attrs:{id:"http-ç±»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-ç±»"}},[t._v("#")]),t._v(" HTTP ç±»")]),t._v(" "),n("p",[n("img",{attrs:{src:a(206),alt:"HTTP Architect"}})]),t._v(" "),n("ul",[n("li",[n("code",[t._v("http.Agent")]),t._v("ï¼šè´Ÿè´£ç®¡ç† HTTP å®¢æˆ·ç«¯çš„è¿æ¥æŒä¹…æ€§å’Œé‡ç”¨")]),t._v(" "),n("li",[n("code",[t._v("http.ClientRequest")]),t._v("ï¼šç”¨äºå‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼Œç”± "),n("code",[t._v("http.request")]),t._v(" å†…éƒ¨åˆ›å»ºå¹¶è¿”å›ï¼Œè¡¨ç¤ºæ­£åœ¨è¿›è¡Œçš„è¯·æ±‚ï¼Œä¸”å…¶è¯·æ±‚å¤´å·²è¿›å…¥é˜Ÿåˆ—")]),t._v(" "),n("li",[n("code",[t._v("http.Server")]),t._v("ï¼šç”¨äºæä¾› HTTP æœåŠ¡ï¼Œå¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚")]),t._v(" "),n("li",[n("code",[t._v("http.ServerResponse")]),t._v("ï¼šç”± HTTP æœåŠ¡å™¨åœ¨å†…éƒ¨åˆ›å»ºï¼Œè€Œä¸æ˜¯ç”±ç”¨æˆ·åˆ›å»º")]),t._v(" "),n("li",[n("code",[t._v("http.IncomingMessage")]),t._v("ï¼šç”¨äºè®¿é—®å“åº”çŠ¶æ€ã€æ¶ˆæ¯å¤´ä»¥åŠæ•°æ®")])]),t._v(" "),n("h3",{attrs:{id:"http-clientrequest"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-clientrequest"}},[t._v("#")]),t._v(" http.ClientRequest")]),t._v(" "),n("p",[t._v("HTTP å®¢æˆ·ç«¯")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" client "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://127.0.0.1:3000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[n("code",[t._v("http.ClientRequest")]),t._v(" å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ª Socket æ¥å‘èµ·è¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("å½“ä½ è°ƒç”¨ "),n("code",[t._v("http.request(options)")]),t._v(" æ—¶ï¼Œå†…éƒ¨æ˜¯è¿™æ ·çš„ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onSocket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"http-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-server"}},[t._v("#")]),t._v(" http.Server")]),t._v(" "),n("p",[t._v("Web æœåŠ¡å™¨")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pathname "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[n("code",[t._v("http.Server")]),t._v(" ç»§æ‰¿äº† "),n("code",[t._v("net.Server")])]),t._v(" "),n("li",[n("code",[t._v("net.createServer(fn)")]),t._v(" å›è°ƒä¸­çš„ "),n("code",[t._v("socket")]),t._v(" æ˜¯ä¸ªåŒå·¥çš„ "),n("code",[t._v("stream")]),t._v(" æ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯»å–å‘é€æ–¹ä¿¡æ¯ã€å‘å‘é€æ–¹å‘é€ä¿¡æ¯éƒ½é å®ƒå®ç°")])]),t._v(" "),n("p",[t._v("ğŸŒ° "),n("strong",[t._v("æ ‡å‡†ç¤ºä¾‹ï¼š")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‚è€ƒï¼šhttps://cnodejs.org/topic/4fb1c1fd1975fe1e1310490b")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" net "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8989")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOST")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Connected: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoteAddress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remotePort"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DATA '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoteAddress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("': '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Data is: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Data from you is  \"'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CLOSED: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remoteAddress "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remotePort"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOST")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),n("h3",{attrs:{id:"http-incomingmessage"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-incomingmessage"}},[t._v("#")]),t._v(" http.IncomingMessage")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/nodejs/node/blob/master/lib/_http_incoming.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.IncomingMessage"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("è·å–è¯·æ±‚æ–¹å‘é€çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šè¯·æ±‚æ–¹æ³•ã€è·¯å¾„ã€ä¼ é€’çš„æ•°æ®ç­‰ã€‚")]),t._v(" "),n("ul",[n("li",[t._v("åœ¨ Server ç«¯å’Œ Client ç«¯éƒ½ä¼šå‡ºç°")])]),t._v(" "),n("p",[t._v("ä¸‰ä¸ªéœ€è¦æ³¨æ„çš„å±æ€§ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("methodï¼šåªåœ¨ Server ç«¯å®ä¾‹ä¸­æœ‰")]),t._v(" "),n("li",[t._v("statusCodeï¼šåªåœ¨ Client ç«¯å®ä¾‹ä¸­æœ‰")]),t._v(" "),n("li",[t._v("statusMessageï¼šåªåœ¨ Client ç«¯å®ä¾‹ä¸­æœ‰")])]),t._v(" "),n("h3",{attrs:{id:"http-serverresponse"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-serverresponse"}},[t._v("#")]),t._v(" http.ServerResponse")]),t._v(" "),n("p",[t._v("å®ç°äº† Writable Stream interfaceï¼Œå†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡ Socket æ¥å‘é€ä¿¡æ¯ã€‚")]),t._v(" "),n("hr"),t._v(" "),n("p",[n("strong",[t._v("å‚è€ƒèµ„æ–™ï¼š")])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.im/post/5965bb26f265da6c204195b3",target:"_blank",rel:"noopener noreferrer"}},[t._v("èµ°è¿› Node.js ä¹‹ HTTP å®ç°åˆ†æ"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);