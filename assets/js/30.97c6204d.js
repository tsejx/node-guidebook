(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{264:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"å¼‚æ­¥ç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥ç¼–ç¨‹"}},[t._v("#")]),t._v(" å¼‚æ­¥ç¼–ç¨‹")]),t._v(" "),a("h2",{attrs:{id:"è§£å†³æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("å¼‚æ­¥ç¼–ç¨‹çš„ä¸»è¦è§£å†³æ–¹æ¡ˆæœ‰å¦‚ä¸‹ä¸‰ç§ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼")]),t._v(" "),a("li",[t._v("Promise/Deferred æ¨¡å¼")]),t._v(" "),a("li",[t._v("æµç¨‹æ§åˆ¶åº“")])]),t._v(" "),a("h3",{attrs:{id:"äº‹ä»¶å‘å¸ƒ-è®¢é˜…æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº‹ä»¶å‘å¸ƒ-è®¢é˜…æ¨¡å¼"}},[t._v("#")]),t._v(" äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼")]),t._v(" "),a("p",[t._v("Node è‡ªèº«æä¾›çš„ "),a("code",[t._v("events")]),t._v(" æ¨¡å—æ˜¯å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„ç®€å•å®ç°ï¼ŒNode ä¸­éƒ¨åˆ†æ¨¡å—éƒ½ç»§æ‰¿äºå®ƒï¼Œè¿™ä¸ªæ¨¡å—æ¯”å‰ç«¯æµè§ˆå™¨å¤§é‡ DOM äº‹ä»¶ç»‘å®šçš„æœºåˆ¶ç®€å•ï¼Œä¸å­˜åœ¨äº‹ä»¶å†’æ³¡ç­‰æ¦‚å¿µã€‚è¯¥æ¨¡å—å…·æœ‰ "),a("code",[t._v("addListener/on()")]),t._v("ã€"),a("code",[t._v("once()")]),t._v("ã€"),a("code",[t._v("removeListener()")]),t._v("ã€"),a("code",[t._v("removeAllListeners()")]),t._v(" å’Œ "),a("code",[t._v("emit()")]),t._v(" ç­‰åŸºæœ¬çš„äº‹ä»¶ç›‘å¬æ¨¡å¼çš„æ–¹æ³•å®ç°ã€‚")]),t._v(" "),a("p",[t._v("ğŸŒ° "),a("strong",[t._v("åŸºæœ¬ç¤ºä¾‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¢é˜…")]),t._v("\nemitter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'event'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘å¸ƒ")]),t._v("\nemitter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'event'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'I am message!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("è®¢é˜…äº‹ä»¶å°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°çš„åº”ç”¨ã€‚äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼å¯ä»¥å®ç°ä¸€ä¸ªäº‹ä»¶ä¸å¤šä¸ªå›è°ƒå‡½æ•°çš„å…³è”ï¼Œè¿™äº›å›è°ƒå‡½æ•°åˆç§°ä¸ºäº‹ä»¶ä¾¦å¬å™¨ã€‚é€šè¿‡ "),a("code",[t._v("emit()")]),t._v(" å‘å¸ƒäº‹ä»¶åï¼Œæ¶ˆæ¯ä¼šç«‹å³ä¼ é€’ç»™å½“å‰äº‹ä»¶çš„æ‰€æœ‰ä¾¦å¬å™¨æ‰§è¡Œã€‚ä¾¦å¬å™¨å¯ä»¥å¾ˆçµæ´»åœ°æ·»åŠ å’Œåˆ é™¤ï¼Œä½¿å¾—äº‹ä»¶å’Œå…·ä½“å¤„ç†é€»è¾‘ä¹‹é—´å¯ä»¥å¾ˆè½»æ¾åœ°å…³è”å’Œè§£è€¦ã€‚")]),t._v(" "),a("p",[t._v("äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼å¸¸å¸¸ç”¨äº"),a("strong",[t._v("è§£è€¦ä¸šåŠ¡é€»è¾‘")]),t._v("ï¼Œäº‹ä»¶å‘å¸ƒè€…æ— é¡»å…³æ³¨è®¢é˜…çš„ä¾¦å¬å™¨å¦‚ä½•å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œç”šè‡³ä¸ç”¨å…³æ³¨æœ‰å¤šå°‘ä¸ªä¾¦å¬å™¨å­˜åœ¨ï¼Œæ•°æ®é€šè¿‡æ¶ˆæ¯çš„æ–¹å¼å¯ä»¥å¾ˆçµæ´»åœ°ä¼ é€’ã€‚æœ‰ä¸€äº›å…¸å‹åœºæ™¯ä¸­ï¼Œå¯ä»¥é€šè¿‡äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼è¿›è¡Œç»„ä»¶å°è£…ï¼Œå°†ä¸å˜çš„éƒ¨åˆ†å°è£…åœ¨ç»„ä»¶å†…éƒ¨ï¼Œå°†å®¹æ˜“å˜åŒ–ã€éœ€è‡ªå®šä¹‰çš„éƒ¨åˆ†é€šè¿‡äº‹ä»¶æš´éœ²ç»™å¤–éƒ¨å¤„ç†ï¼Œè¿™æ˜¯ä¸€ç§å…¸å‹çš„é€»è¾‘åˆ†ç¦»æ–¹å¼ã€‚åœ¨è¿™ç§äº‹ä»¶å‘å¸ƒ/è®¢é˜…ç»„ä»¶ä¸­ï¼Œäº‹ä»¶çš„è®¾è®¡éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå…³ä¹å¤–éƒ¨è°ƒç”¨ç»„ä»¶æ—¶æ˜¯å¦ä¼˜é›…ï¼Œä»æŸç§è§’åº¦æ¥è¯´äº‹ä»¶çš„è®¾è®¡å°±æ˜¯ç»„ä»¶çš„æ¥å£è®¾è®¡ã€‚")]),t._v(" "),a("p",[t._v("ä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œäº‹ä»¶ä¾¦å¬å™¨æ¨¡å¼ä¹Ÿæ˜¯ä¸€ç§é’©å­ï¼ˆhookï¼‰æœºåˆ¶ï¼Œåˆ©ç”¨é’©å­å¯¼å‡ºå†…éƒ¨æ•°æ®æˆ–çŠ¶æ€ç»™å¤–éƒ¨çš„è°ƒç”¨è€…ã€‚Node ä¸­çš„å¾ˆå¤šå¯¹è±¡å¤§å¤šå…·æœ‰é»‘ç›’çš„ç‰¹ç‚¹ï¼ŒåŠŸèƒ½ç‚¹è¾ƒå°‘ï¼Œå¦‚æœä¸é€šè¿‡äº‹ä»¶é’©å­çš„å½¢å¼ï¼Œæˆ‘ä»¬å°±æ— æ³•è·å–å¯¹è±¡åœ¨è¿è¡ŒæœŸé—´çš„ä¸­é—´å€¼æˆ–å†…éƒ¨çŠ¶æ€ã€‚è¿™ç§é€šè¿‡äº‹ä»¶é’©å­çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç¼–ç¨‹è€…ä¸ç”¨å…³æ³¨ç»„ä»¶æ˜¯å¦‚ä½•å¯åŠ¨å’Œæ‰§è¡Œçš„ï¼Œåªéœ€å…³æ³¨åœ¨éœ€è¦çš„äº‹ä»¶ç‚¹ä¸Šå³å¯ã€‚")]),t._v(" "),a("p",[t._v("Node å¯¹äº‹ä»¶å‘å¸ƒ/è®¢é˜…æœºåˆ¶åšäº†é¢å¤–çš„å¤„ç†ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Node åœ¨å¯¹å•ä¸ªäº‹ä»¶ç»‘å®šè¶…è¿‡ 10 ä¸ªä¾¦å¬å™¨æ—¶ä¼šæŠ›å‡ºå¯èƒ½å†…å­˜æ³„æ¼çš„è­¦å‘Šï¼Œé€šè¿‡ "),a("code",[t._v("emitter.setMaxListeners(0)")]),t._v(" å¯å°†é™åˆ¶å»é™¤ã€‚")]),t._v(" "),a("li",[t._v("è¿è¡Œæ—¶é”™è¯¯è§¦å‘ "),a("code",[t._v("error")]),t._v(" äº‹ä»¶ï¼ŒEventEmitter ä¼šæ£€æŸ¥æ˜¯å¦æœ‰å¯¹ "),a("code",[t._v("error")]),t._v(" äº‹ä»¶æ·»åŠ è¿‡ä¾¦å¬å™¨ã€‚å¦‚æœæ·»åŠ äº†ï¼Œè¿™ä¸ªé”™è¯¯å°†ä¼šäº¤ç”±è¯¥ä¾¦å¬å™¨å¤„ç†ï¼Œå¦åˆ™è¿™ä¸ªé”™è¯¯å°†ä¼šä½œä¸ºå¼‚å¸¸æŠ›å‡ºã€‚å¦‚æœå¤–éƒ¨æ²¡æœ‰æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå°†ä¼šå¼•èµ·çº¿ç¨‹æ¨å‡ºã€‚")])]),t._v(" "),a("h4",{attrs:{id:"ç»§æ‰¿-events-æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»§æ‰¿-events-æ¨¡å—"}},[t._v("#")]),t._v(" ç»§æ‰¿ events æ¨¡å—")]),t._v(" "),a("p",[t._v("ğŸŒ° "),a("strong",[t._v("åŸºæœ¬ç¤ºä¾‹ï¼šStream å¯¹è±¡ç»§æ‰¿ EventEmitter")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" events "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'events'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Stream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  events"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("EventEmitter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nutil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("inherits")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" events"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EventEmitter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"åˆ©ç”¨äº‹ä»¶é˜Ÿåˆ—è§£å†³é›ªå´©é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ©ç”¨äº‹ä»¶é˜Ÿåˆ—è§£å†³é›ªå´©é—®é¢˜"}},[t._v("#")]),t._v(" åˆ©ç”¨äº‹ä»¶é˜Ÿåˆ—è§£å†³é›ªå´©é—®é¢˜")]),t._v(" "),a("p",[t._v("åœ¨äº‹ä»¶è®¢é˜…/å‘å¸ƒæ¨¡å¼ä¸­ï¼Œé€šå¸¸ä¹Ÿæœ‰ä¸€ä¸ª "),a("code",[t._v("once()")]),t._v(" æ–¹æ³•ï¼Œé€šè¿‡å®ƒæ·»åŠ çš„ä¾¦å¬å™¨åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨æ‰§è¡Œä¹‹åå°±ä¼šå°†å®ƒä¸äº‹ä»¶çš„å…³è”ç§»é™¤ã€‚è¿™ä¸ªç‰¹æ€§å¸¸å¸¸å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿‡æ»¤ä¸€äº›é‡å¤æ€§çš„äº‹ä»¶å“åº”ã€‚")]),t._v(" "),a("p",[t._v("åœ¨è®¡ç®—æœºä¸­ï¼Œç¼“å­˜ç”±äºå­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦ååˆ†å¿«ï¼Œå¸¸å¸¸ç”¨äºåŠ é€Ÿæ•°æ®è®¿é—®ï¼Œè®©ç»å¤§å¤šæ•°çš„è¯·æ±‚ä¸å¿…é‡å¤å»åšä¸€äº›ä½æ•ˆçš„æ•°æ®è¯»å–ã€‚æ‰€è°“é›ªå´©é—®é¢˜ï¼Œå°±æ˜¯åœ¨é«˜è®¿é—®é‡ã€å¤§å¹¶å‘é‡çš„æƒ…å†µä¸‹ç¼“å­˜å¤±æ•ˆçš„æƒ…æ™¯ï¼Œæ­¤æ—¶å¤§é‡çš„è¯·æ±‚åŒæ—¶æ¶Œå…¥æ•°æ®åº“ä¸­ï¼Œæ•°æ®æ— æ³•åŒæ—¶æ‰¿å—å¦‚æ­¤å¤§çš„æŸ¥è¯¢è¯·æ±‚ï¼Œè¿›è€Œå¾€å‰å½±å“åˆ°ç½‘ç«™æ•´ä½“çš„å“åº”é€Ÿåº¦ã€‚")]),t._v(" "),a("p",[t._v("ğŸŒ° "),a("strong",[t._v("åŸºæœ¬ç¤ºä¾‹ï¼šæ•°æ®åº“æŸ¥è¯¢è¯­å¥")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SQL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("results")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¦‚æœç«™ç‚¹åˆšå¥½å¯åŠ¨ï¼Œè¿™æ—¶ç¼“å­˜ä¸­æ˜¯ä¸å­˜åœ¨æ•°æ®çš„ï¼Œè€Œå¦‚æœè®¿é—®é‡å·¨å¤§ï¼ŒåŒä¸€å¥ SQL ä¼šè¢«å‘é€åˆ°æ•°æ®åº“ä¸­åå¤æŸ¥è¯¢ï¼Œä¼šå½±å“æœåŠ¡çš„æ•´ä½“æ€§èƒ½ã€‚")]),t._v(" "),a("p",[t._v("æ”¹è¿›æ–¹æ¡ˆå¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªçŠ¶æ€é”è§£å†³ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ready'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ready'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pending'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SQL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ready'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("è¿™ç§æƒ…æ™¯ä¸‹ï¼Œè¿ç»­å¤šæ¬¡è°ƒç”¨ "),a("code",[t._v("select()")]),t._v(" æ—¶ï¼Œåªæœ‰é¦–æ¬¡è°ƒç”¨æ˜¯ç”Ÿæ•ˆçš„ï¼Œåç»­çš„ "),a("code",[t._v("select()")]),t._v(" æ˜¯æ²¡æœ‰æ•°æ®æœåŠ¡çš„ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å¼•å…¥äº‹ä»¶é˜Ÿåˆ—ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" proxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("events"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EventEmitter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ready'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'selected'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ready'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pending'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SQL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("results")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'selected'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ready'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨äº† "),a("code",[t._v("once()")]),t._v(" æ–¹æ³•ï¼Œå°†æ‰€æœ‰è¯·æ±‚çš„å›è°ƒéƒ½å‹å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œåˆ©ç”¨å…¶æ‰§è¡Œä¸€æ¬¡å°±ä¼šå°†ç›‘è§†å™¨ç§»é™¤çš„ç‰¹ç‚¹ï¼Œä¿è¯æ¯ä¸ªå›è°ƒéƒ½åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚å¯¹äºç›¸åŒçš„ SQL è¯­å¥ï¼Œä¿è¯åœ¨åŒä¸€ä¸ªæŸ¥è¯¢å¼€å§‹åˆ°ç»“æŸçš„è¿‡ç¨‹ä¸­æ°¸è¿œåªæœ‰ä¸€æ¬¡ã€‚SQL åœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ–°åˆ°æ¥çš„ç›¸åŒè°ƒç”¨åªéœ€åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…æ•°æ®å°±ç»ªå³å¯ï¼Œä¸€æ—¦æŸ¥è¯¢ç»“æŸï¼Œå¾—åˆ°çš„ç»“æœå¯ä»¥è¢«è¿™äº›è°ƒç”¨å…±åŒä½¿ç”¨ã€‚è¿™ç§æ–¹å¼èƒ½èŠ‚çœé‡å¤çš„æ•°æ®åº“è°ƒç”¨äº§ç”Ÿçš„å¼€é”€ã€‚ç”±äº Node å•çº¿ç¨‹æ‰§è¡Œçš„åŸå› ï¼Œæ­¤å¤„æ— é¡»æ‹…å¿ƒçŠ¶æ€åŒæ­¥é—®é¢˜ã€‚è¿™ç§æ–¹å¼å…¶å®ä¹Ÿå¯ä»¥åº”ç”¨åˆ°å…¶å®ƒè¿œç¨‹è°ƒç”¨çš„åœºæ™¯ä¸­ï¼Œå³ä½¿å¤–éƒ¨æ²¡æœ‰ç¼“å­˜ç­–ç•¥ï¼Œä¹Ÿèƒ½æœ‰æ•ˆèŠ‚çœé‡å¤å¼€é”€ã€‚")]),t._v(" "),a("h4",{attrs:{id:"å¤šå¼‚æ­¥ä¹‹é—´çš„åä½œæ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¤šå¼‚æ­¥ä¹‹é—´çš„åä½œæ–¹æ¡ˆ"}},[t._v("#")]),t._v(" å¤šå¼‚æ­¥ä¹‹é—´çš„åä½œæ–¹æ¡ˆ")]),t._v(" "),a("p",[t._v("åˆ©ç”¨é«˜é˜¶å‡½æ•°çš„ä¼˜åŠ¿ï¼Œä¾¦å¬å™¨ä½œä¸ºå›è°ƒå‡½æ•°å¯ä»¥éšæ„æ·»åŠ å’Œåˆ é™¤ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…è½»æ¾å¤„ç†éšæ—¶å¯èƒ½æ·»åŠ çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¹Ÿå¯ä»¥éš”ç¦»ä¸šåŠ¡é€»è¾‘ï¼Œä¿æŒä¸šåŠ¡é€»è¾‘å•å…ƒçš„èŒè´£å•ä¸€ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œäº‹ä»¶ä¸ä¾¦å¬å™¨çš„å…³ç³»æ˜¯ä¸€å¯¹å¤šï¼Œä½†åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œä¹Ÿä¼šå‡ºç°äº‹ä»¶ä¸ä¾¦å¬å™¨çš„å…³ç³»æ˜¯å¤šå¯¹ä¸€çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªä¸šåŠ¡é€»è¾‘å¯èƒ½ä¾èµ–ä¸¤ä¸ªé€šè¿‡å›è°ƒæˆ–äº‹ä»¶ä¼ é€’çš„ç»“æœã€‚")]),t._v(" "),a("h3",{attrs:{id:"promise-deferred-æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promise-deferred-æ¨¡å¼"}},[t._v("#")]),t._v(" Promise/Deferred æ¨¡å¼")]),t._v(" "),a("h3",{attrs:{id:"æµç¨‹æ§åˆ¶åº“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµç¨‹æ§åˆ¶åº“"}},[t._v("#")]),t._v(" æµç¨‹æ§åˆ¶åº“")]),t._v(" "),a("h4",{attrs:{id:"å°¾è§¦å‘ä¸-next"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°¾è§¦å‘ä¸-next"}},[t._v("#")]),t._v(" å°¾è§¦å‘ä¸ Next")]),t._v(" "),a("p",[t._v("æ¯ä¸ªä¸­é—´ä»¶ä¼ é€’è¯·æ±‚å¯¹è±¡ã€å“åº”å¯¹è±¡å’Œå°¾è§¦å‘å‡½æ•°ï¼Œé€šè¿‡é˜Ÿåˆ—å½¢æˆä¸€ä¸ªå¤„ç†æµã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"",alt:""}})]),t._v(" "),a("p",[t._v("ä¸­é—´ä»¶æœºåˆ¶ä½¿å¾—åœ¨å¤„ç†ç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¯ä»¥åƒé¢å‘åˆ‡é¢ç¼–ç¨‹ä¸€æ ·è¿›è¡Œè¿‡æ»¤ã€éªŒè¯ã€æ—¥å¿—ç­‰åŠŸèƒ½ï¼Œè€Œä¸ä¸å…·ä½“ä¸šåŠ¡é€»è¾‘äº§ç”Ÿå…³è”ï¼Œä»¥è‡´äº§ç”Ÿè€¦åˆã€‚")]),t._v(" "),a("h2",{attrs:{id:"å¼‚æ­¥å¹¶å‘æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥å¹¶å‘æ§åˆ¶"}},[t._v("#")]),t._v(" å¼‚æ­¥å¹¶å‘æ§åˆ¶")]),t._v(" "),a("p",[t._v("åŒæ­¥ I/O å› ä¸ºæ¯ä¸ª I/O éƒ½æ˜¯å½¼æ­¤é˜»å¡çš„ï¼Œåœ¨å¾ªç¯ä½“ä¸­ï¼Œæ€»æ˜¯ä¸€ä¸ªæ¥ç€ä¸€ä¸ªè°ƒç”¨ï¼Œä¸ä¼šå‡ºç°è€—ç”¨æ–‡ä»¶æè¿°ç¬¦å¤ªå¤šçš„æƒ…å†µï¼ŒåŒæ—¶æ€§èƒ½ä¹Ÿæ˜¯åœ°ä¸‹çš„ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºå¼‚æ­¥ I/Oï¼Œè™½ç„¶å¹¶å‘å®¹æ˜“å®ç°ï¼Œä½†æ˜¯ç”±äºå¤ªå®¹æ˜“å®ç°ï¼Œä¾ç„¶éœ€è¦æ§åˆ¶ã€‚æ¢è¨€ä¹‹ï¼Œå°½ç®¡æ˜¯è¦å‹æ¦¨åº•å±‚ç³»ç»Ÿçš„æ€§èƒ½ï¼Œä½†è¿˜æ˜¯éœ€è¦ç»™äºˆä¸€å®šçš„è¿‡è½½ä¿æŠ¤ï¼Œä»¥é˜²æ­¢è¿‡çŠ¹ä¸åŠã€‚")]),t._v(" "),a("h3",{attrs:{id:"bagpipe-è§£å†³æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bagpipe-è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" bagpipe è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("ul",[a("li",[t._v("é€šè¿‡é˜Ÿåˆ—æ¥æ§åˆ¶å¹¶å‘é‡")]),t._v(" "),a("li",[t._v("å¦‚æœå½“å‰æ´»è·ƒï¼ˆæŒ‡è°ƒç”¨å‘èµ·ä½†æœªæ‰§è¡Œå›è°ƒï¼‰çš„å¼‚æ­¥è°ƒç”¨é‡å°äºé™å®šå€¼ï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºæ‰§è¡Œ")]),t._v(" "),a("li",[t._v("å¦‚æœæ´»è·ƒè°ƒç”¨è¾¾åˆ°é™å®šå€¼ï¼Œè°ƒç”¨æš‚æ—¶å­˜æ”¾åœ¨é˜Ÿåˆ—ä¸­")]),t._v(" "),a("li",[t._v("æ¯ä¸ªå¼‚æ­¥è°ƒç”¨ç»“æŸæ—¶ï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºæ–°çš„å¼‚æ­¥è°ƒç”¨æ‰§è¡Œ")])]),t._v(" "),a("p",[t._v("bagpipe çš„ API ä¸»è¦æš´éœ²äº†ä¸€ä¸ª "),a("code",[t._v("push()")]),t._v(" æ–¹æ³•å’Œ "),a("code",[t._v("full")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),a("p",[t._v("ğŸŒ° "),a("strong",[t._v("æ ‡å‡†ç¤ºä¾‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" Bagpipe "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bagpipe'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾å®šæœ€å¤§å¹¶å‘æ•°ä¸º10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bagpipe "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bagpipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  bagpipe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("async"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚æ­¥å›è°ƒæ‰§è¡Œ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nbagpipe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'full'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åº•å±‚ç³»ç»Ÿå¤„ç†ä¸èƒ½åŠæ—¶å®Œæˆï¼Œé˜Ÿåˆ—æ‹¥å µï¼Œç›®å‰é˜Ÿåˆ—é•¿åº¦ä¸ºï¼š'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å®ç°ç»†èŠ‚ç±»ä¼¼äºå‰æ–‡çš„ "),a("code",[t._v("smooth()")]),t._v("ã€‚"),a("code",[t._v("push()")]),t._v(" æ–¹æ³•ä¾ç„¶æ˜¯é€šè¿‡å‡½æ•°å˜æ¢çš„æ–¹å¼å®ç°ï¼Œå‡è®¾ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–¹æ³•ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œå…¶ä½™ä¸ºå…¶å®ƒå‚æ•°ï¼Œå…¶æ ¸å¿ƒå®ç°å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * æ¨å…¥æ–¹æ³•ï¼Œå‚æ•°ã€‚æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°\n * @param {Function} method å¼‚æ­¥æ–¹æ³•\n * @param {Mix} args å‚æ•°åˆ—è¡¨ï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bagpine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("push")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" args "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é˜Ÿåˆ—é•¿åº¦ä¸è¶…è¿‡é™åˆ¶å€¼æ—¶")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queueLength "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("refuse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Too much async call in queue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TooMuchAstncCallError'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'full'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å°†è°ƒç”¨æ¨å…¥é˜Ÿåˆ—åï¼Œè°ƒç”¨ä¸€æ¬¡ "),a("code",[t._v("next()")]),t._v(" æ–¹æ³•å°è¯•è§¦å‘ã€‚"),a("code",[t._v("next()")]),t._v(" æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * ç»§ç»­æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„åç»­åŠ¨ä½œ\n */")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bagpepe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("next")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" that "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("active "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" that limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" req "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("shift")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("next()")]),t._v(" æ–¹æ³•ä¸»è¦åˆ¤æ–­æ´»è·ƒè°ƒç”¨çš„æ•°é‡ï¼Œå¦‚æœæ­£å¸¸ï¼Œå°†è°ƒç”¨å†…éƒ¨æ–¹æ³• "),a("code",[t._v("run()")]),t._v(" æ¥æ‰§è¡ŒçœŸæ­£çš„è°ƒç”¨ã€‚è¿™é‡Œä¸ºäº†åˆ¤æ–­å›è°ƒå‡½æ•°æ˜¯å¦æ‰§è¡Œï¼Œé‡‡ç”¨äº†ä¸€ä¸ªæ³¨å…¥ä»£ç çš„æŠ€å·§ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*!\n * æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„æ–¹æ³•\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bagpipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("run")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" that "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("active"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" called "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// inject logic")]),t._v("\n  args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// anyway, clear the timer")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if timeout, don't execute")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("called"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pass the outdated error")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'outdated'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// set called as true")]),t._v("\n      called "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      that"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pass the exception")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ms timeout'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'BgapipeTimeoutError'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ç”¨æˆ·ä¼ å…¥çš„å›è°ƒå‡½æ•°è¢«çœŸæ­£æ‰§è¡Œå‰ï¼Œè¢«å°è£…æ›¿æ¢è¿‡ã€‚è¿™ä¸ªå°è£…çš„å›è°ƒå‡½æ•°å†…éƒ¨çš„é€»è¾‘å°†æ´»è·ƒå€¼çš„è®¡æ•°å™¨å‡ 1 åï¼Œä¸»åŠ¨è°ƒç”¨ "),a("code",[t._v("next()")]),t._v(" æ‰§è¡Œåç»­ç­‰å¾…çš„å¼‚æ­¥è°ƒç”¨ã€‚")]),t._v(" "),a("p",[t._v("bagpipe ç±»ä¼¼äºæ‰“å¼€äº†ä¸€é“çª—å£ï¼Œå…è®¸å¼‚æ­¥è°ƒç”¨å¹¶è¡Œè¿›è¡Œï¼Œä½†æ˜¯ä¸¥æ ¼é™å®šä¸Šçº¿ã€‚ä»…ä»…åœ¨è°ƒç”¨ "),a("code",[t._v("push()")]),t._v(" æ—¶åˆ†å¼€ä¼ é€’ï¼Œå¹¶ä¸å¯¹åŸæœ‰ API æœ‰ä»»ä½•ä¾µå…¥ã€‚")]),t._v(" "),a("h4",{attrs:{id:"æ‹’ç»æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ‹’ç»æ¨¡å¼"}},[t._v("#")]),t._v(" æ‹’ç»æ¨¡å¼")]),t._v(" "),a("p",[t._v("äº‹å®ä¸Šï¼Œbagpipe è¿˜æœ‰ä¸€äº›æ·±åº¦çš„ä½¿ç”¨æ–¹å¼ã€‚å¯¹äºå¤§é‡çš„å¼‚æ­¥è°ƒç”¨ï¼Œä¹Ÿéœ€è¦åˆ†åœºæ™¯è¿›è¡ŒåŒºåˆ†ï¼Œå› ä¸ºè®¾è®¡å¹¶å‘æ§åˆ¶ï¼Œå¿…ç„¶ä¼šé€ æˆéƒ¨åˆ†è°ƒç”¨éœ€è¦è¿›è¡Œç­‰å¾…ã€‚å¦‚æœè°ƒç”¨æœ‰å®æ—¶æ–¹é¢çš„éœ€æ±‚ï¼Œé‚£ä¹ˆéœ€è¦å¿«é€Ÿè¿”å›ï¼Œå› ä¸ºç­‰åˆ°æ–¹æ³•è¢«çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå¯èƒ½å·²ç»è¶…è¿‡äº†ç­‰å¾…æ—¶é—´ï¼Œå³ä½¿è¿”å›äº†æ•°æ®ï¼Œä¹Ÿæ²¡æœ‰æ„ä¹‰äº†ã€‚è¿™ç§åœºæ™¯ä¸‹éœ€è¦å¿«é€Ÿå¤±è´¥ï¼Œè®©è°ƒç”¨æ–¹å°½æ—©è¿”å›ï¼Œè€Œä¸ç”¨æµªè´¹ä¸å¿…è¦çš„ç­‰å¾…æ—¶é—´ã€‚bagpipe ä¸ºæ­¤æ”¯æŒäº†æ‹’ç»æ¨¡å¼ã€‚")]),t._v(" "),a("p",[t._v("æ‹’ç»æ¨¡å¼çš„ä½¿ç”¨åªè¦è®¾ç½®ä¸‹å‚æ•°å³å¯ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾å®šæœ€å¤§å¹¶å‘æ•°ä¸º 10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bagpipe "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bagpipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  refuse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("åœ¨æ‹’ç»æ¨¡å¼ä¸‹ï¼Œå¦‚æœç­‰å¾…çš„è°ƒç”¨é˜Ÿåˆ—ä¹Ÿæ»¡äº†ä¹‹åï¼Œå¿ƒæ¥çš„è°ƒç”¨å°±ç›´æ¥è¿”å›å®ƒä¸€ä¸ªé˜Ÿåˆ—å¤ªå¿™çš„æ‹’ç»å¼‚å¸¸ã€‚")]),t._v(" "),a("h4",{attrs:{id:"è¶…æ—¶æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¶…æ—¶æ§åˆ¶"}},[t._v("#")]),t._v(" è¶…æ—¶æ§åˆ¶")]),t._v(" "),a("p",[t._v("é€ æˆé˜Ÿåˆ—ç”¨å¡çš„ä¸»è¦åŸå› æ˜¯å¼‚æ­¥è°ƒç”¨è€—æ—¶å¤ªä¹…ï¼Œè°ƒç”¨äº§ç”Ÿçš„é€Ÿåº¦è¿œè¿œé«˜äºæ‰§è¡Œçš„é€Ÿåº¦ã€‚ä¸ºäº†é˜²æ­¢æŸäº›å¼‚æ­¥è°ƒç”¨ä½¿ç”¨äº†å¤ªå¤šçš„æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªæ—¶é—´åŸºçº¿ï¼Œå°†é‚£äº›æ‰§è¡Œæ—¶é—´å¤ªä¹…çš„å¼‚æ­¥è°ƒç”¨æ¸…ç†å‡ºæ´»è·ƒé˜Ÿåˆ—ï¼Œè®©æ’é˜Ÿä¸­çš„å¼‚æ­¥è°ƒç”¨å°½å¿«æ‰§è¡Œã€‚å¦åˆ™åœ¨æ‹’ç»æ¨¡å¼ä¸‹ï¼Œä¼šæœ‰å¤ªå¤šçš„è°ƒç”¨å› ä¸ºæŸä¸ªæ‰§è¡Œå¾—æ…¢ï¼Œå¯¼è‡´å¾—åˆ°æ‹’ç»å¼‚å¸¸ã€‚ç›¸å¯¹è€Œè¨€ï¼Œè¿™ç§åœºæ™¯ä¸‹å¾—åˆ°æ‹’ç»å¼‚å¸¸æ˜¾å¾—æ¯”è¾ƒæ— è¾œã€‚ä¸ºäº†å…¬å¹³åœ°å¯¹å¾…åœ¨å®æ—¶éœ€æ±‚åœºæ™¯ä¸‹çš„æ¯ä¸ªè°ƒç”¨ï¼Œå¿…é¡»è¦æ§åˆ¶æ¯ä¸ªè°ƒç”¨çš„æ‰§è¡Œæ—¶é—´ï¼Œå°†é‚£äº›å®³ç¾¤ä¹‹é©¬æå‡ºé˜Ÿä¼ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºæ­¤ï¼Œbagpipe ä¹Ÿæä¾›äº†è¶…æ—¶æ§åˆ¶ã€‚è¶…æ—¶æ§åˆ¶æ˜¯ä¸ºäº†å¼‚æ­¥è°ƒç”¨è®¾ç½®ä¸€ä¸ªæ—¶é—´é˜€å€¼ï¼Œå¦‚æœå¼‚æ­¥è°ƒç”¨æ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…å®Œæˆï¼Œæˆ‘ä»¬å…ˆæ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼Œè®©ç”¨æˆ·å¾—åˆ°ä¸€ä¸ªè¶…æ—¶å¼‚å¸¸ï¼Œä»¥å°½æ—©è¿”å›ã€‚ç„¶åè®©ä¸‹ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ä¸­çš„è°ƒç”¨å­©å­é†’ã€‚")]),t._v(" "),a("p",[t._v("è¶…æ—¶çš„è®¾ç½®å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®æœ€å¤§å¹¶å‘æ•° 10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bagpipe "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bagpiep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¼‚æ­¥è°ƒç”¨çš„å¹¶å‘é™åˆ¶åœ¨ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ä¸åŒï¼šéå®æ—¶åœºæ™¯ä¸‹ï¼Œè®©è¶…å‡ºé™åˆ¶çš„å¹¶å‘æš‚æ—¶ç­‰å¾…æ‰§è¡Œå·²ç»å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼›ä½†åœ¨å®æ—¶åœºæ™¯ä¸‹ï¼Œéœ€è¦æ›´ç»†ç²’åº¦ã€æ›´åˆç†çš„æ§åˆ¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"async-è§£å†³æ–¹æ¡ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#async-è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" async è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("p",[a("code",[t._v("async")]),t._v(" ä¹Ÿæä¾›äº†ä¸€ä¸ªæ–¹æ³•ç”¨äºå¤„ç†å¼‚æ­¥è°ƒç”¨çš„é™åˆ¶ï¼š"),a("code",[t._v("parallelLimit()")]),t._v("ã€‚å¦‚ä¸‹æ˜¯ "),a("code",[t._v("async")]),t._v(" çš„ç¤ºä¾‹ä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("async"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parallelLimt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file1.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file2.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" results")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("parallelLimit()")]),t._v(" ä¸ "),a("code",[t._v("paralletl()")]),t._v(" ç±»ä¼¼ï¼Œä½†å¤šäº†ä¸€ä¸ªç”¨äºé™åˆ¶å¹¶å‘æ•°é‡çš„å‚æ•°ï¼Œä½¿å¾—ä»»åŠ¡åªèƒ½åŒæ—¶å¹¶å‘ä¸€å®šæ•°é‡ï¼Œè€Œä¸æ˜¯æ— é™åˆ¶å¹¶å‘ã€‚")]),t._v(" "),a("p",[a("code",[t._v("parallelLimt()")]),t._v(" æ–¹æ³•çš„ç¼ºé™·åœ¨äºæ— æ³•åŠ¨æ€åœ°å¢åŠ å¹¶è¡Œä»»åŠ¡ã€‚ä¸ºæ­¤ï¼Œ"),a("code",[t._v("async")]),t._v(" æä¾›äº† "),a("code",[t._v("queue()")]),t._v(" æ–¹æ³•æ¥æ»¡è¶³è¯¥éœ€æ±‚ï¼Œè¿™å¯¹äºéå†æ–‡ä»¶ç›®å½•ç­‰æ“ä½œååˆ†æœ‰æ•ˆã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" q "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" async"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("queue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("drain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®Œæˆäº†é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å°½ç®¡ "),a("code",[t._v("queue()")]),t._v(" å®ç°äº†åŠ¨æ€æ·»åŠ å¹¶è¡Œä»»åŠ¡ï¼Œä½†æ˜¯ç›¸æ¯” "),a("code",[t._v("parallelLimit()")]),t._v(" ï¼Œç”±äº "),a("code",[t._v("queue()")]),t._v(" æ¥æ”¶çš„å‚æ•°æ˜¯å›ºå®šçš„ï¼Œå®ƒä¸¢å¤±äº† "),a("code",[t._v("parallelLimit()")]),t._v(" çš„å¤šæ ·æ€§ï¼Œæˆ‘ç§å¿ƒåœ°è®¤ä¸º bagpipe æ›´çµæ´»ï¼Œå¯ä»¥æ·»åŠ ä»»æ„ç±»å‹çš„å¼‚æ­¥ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€æ·»åŠ å¼‚æ­¥ä»»åŠ¡ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿåœ¨å®æ—¶å¤„ç†åœºæ™¯ä¸­åŠ å…¥æ‹’ç»æ¨¡å¼çš„è¶…æ—¶æ§åˆ¶ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);