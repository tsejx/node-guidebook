(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{308:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"dgram"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dgram"}},[t._v("#")]),t._v(" Dgram")]),t._v(" "),a("p",[t._v("dgram æ¨¡å—æä¾›äº† UDP æ•°æ®åŒ… socket çš„å®ç°ã€‚")]),t._v(" "),a("h2",{attrs:{id:"dgram-socket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dgram-socket"}},[t._v("#")]),t._v(" dgram.Socket")]),t._v(" "),a("p",[t._v("dgram.Socket å¯¹è±¡æ˜¯ä¸€ä¸ªå°è£…äº†æ•°æ®åŒ…å‡½æ•°åŠŸèƒ½çš„ EventEmitterã€‚")]),t._v(" "),a("p",[t._v("dgram.Socket å®ä¾‹æ˜¯ç”± "),a("code",[t._v("dgram.createSocket()")]),t._v(" åˆ›å»ºçš„ã€‚åˆ›å»º dgram.Socket å®ä¾‹ä¸éœ€è¦ä½¿ç”¨ "),a("code",[t._v("new")]),t._v(" å…³é”®å­—ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ç›¸å…³äº‹ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸å…³äº‹ä»¶"}},[t._v("#")]),t._v(" ç›¸å…³äº‹ä»¶")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("connect")]),t._v("ï¼šå›  "),a("code",[t._v("connect()")]),t._v(" è°ƒç”¨æˆåŠŸè€Œä½¿ socket ä¸è¿œç¨‹åœ°å€å…³è”ä¹‹åè§¦å‘")]),t._v(" "),a("li",[a("strong",[t._v("message")]),t._v("ï¼šå½“æœ‰æ–°çš„æ•°æ®åŒ…è¢« socket æ¥æ”¶æ—¶è§¦å‘ã€‚"),a("code",[t._v("msg")]),t._v(" å’Œ "),a("code",[t._v("rinfo")]),t._v(" ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°è¯¥äº‹ä»¶çš„å¤„ç†å‡½æ•°ä¸­")]),t._v(" "),a("li",[a("strong",[t._v("listening")]),t._v("ï¼šå½“ socket å¼€å§‹ç›‘å¬æ•°æ®åŒ…ä¿¡æ¯æ—¶è§¦å‘è¯¥äº‹ä»¶å¤„ç†å‡½æ•°")]),t._v(" "),a("li",[a("strong",[t._v("close")]),t._v("ï¼šåœ¨è°ƒç”¨ "),a("code",[t._v("close()")]),t._v(" å…³é—­ socket æ—¶è§¦å‘ã€‚è¯¥äº‹ä»¶ä¸€æ—¦è§¦å‘ï¼Œåˆ™è¯¥ socket ä¸ä¼šè§¦å‘æ–°çš„ "),a("code",[t._v("message")]),t._v(" äº‹ä»¶")]),t._v(" "),a("li",[a("strong",[t._v("error")]),t._v("ï¼šå½“æœ‰ä»»ä½•å¼‚å¸¸å‡ºç°æ—¶è§¦å‘è¯¥äº‹ä»¶å¤„ç†å‡½æ•°")])]),t._v(" "),a("h3",{attrs:{id:"socket-bind"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#socket-bind"}},[t._v("#")]),t._v(" socket.bind")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("socket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("socket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å¯¹äº UDP socketï¼Œè¯¥æ–¹æ³•ä¼šä»¤ "),a("code",[t._v("dgram.Socket")]),t._v(" åœ¨æŒ‡å®šçš„ port å’Œå¯é€‰çš„ address ä¸Šç›‘å¬æ•°æ®åŒ…ä¿¡æ¯ã€‚è‹¥ "),a("code",[t._v("port")]),t._v(" æœªæŒ‡å®šæˆ–ä¸º 0,æ“ä½œç³»ç»Ÿä¼šå°è¯•ç»‘å®šä¸€ä¸ªéšæœºçš„ç«¯å£ã€‚è‹¥ "),a("code",[t._v("address")]),t._v(" æœªæŒ‡å®šï¼Œæ“ä½œç³»ç»Ÿä¼šå°è¯•åœ¨æ‰€æœ‰åœ°å€ä¸Šç›‘å¬ã€‚ç»‘å®šå®Œæˆå¼ä¼šè§¦å‘ "),a("code",[t._v("listening")]),t._v(" äº‹ä»¶ï¼Œå¹¶ä¼šè°ƒç”¨ "),a("code",[t._v("callback")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),a("p",[t._v("ä¸€ä¸ªè¢«ç»‘å®šçš„æ•°æ®åŒ… socket ä¼šä»¤ Node.js è¿›ç¨‹ä¿æŒè¿è¡Œä»¥æ¥æ”¶æ•°æ®åŒ…ä¿¡æ¯ã€‚")]),t._v(" "),a("h3",{attrs:{id:"socket-send"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#socket-send"}},[t._v("#")]),t._v(" socket.send")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" offset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("åœ¨ socket ä¸Šå¹¿æ’­ä¸€ä¸ªæ•°æ®åŒ…ã€‚å¯¹äºæ— è¿æ¥çš„ socketï¼Œå¿…é¡»æŒ‡å®šç›®æ ‡çš„ port å’Œ addressã€‚å¯¹äºè¿æ¥çš„ socketï¼Œåˆ™å°†ä¼šä½¿ç”¨å…¶å…³è”çš„è¿œç¨‹ç«¯ç‚¹ï¼Œå› æ­¤ä¸èƒ½è®¾ç½® port å’Œ address å‚æ•°ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("msg å‚æ•°")])]),t._v(" "),a("p",[a("code",[t._v("msg")]),t._v(" å‚æ•°åŒ…å«äº†è¦å‘é€çš„æ¶ˆæ¯ã€‚æ ¹æ®æ¶ˆæ¯çš„ç±»å‹å¯ä»¥æœ‰ä¸åŒçš„åšæ³•ã€‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("å‚æ•°ç±»å‹")]),t._v(" "),a("th",[t._v("è¯´æ˜")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Buffer æˆ– Uint8Array")]),t._v(" "),a("td",[a("code",[t._v("offset")]),t._v(" å’Œ "),a("code",[t._v("length")]),t._v(" æŒ‡å®šäº†æ¶ˆæ¯åœ¨ Buffer ä¸­å¯¹åº”çš„åç§»é‡å’Œå­—èŠ‚æ•°")])]),t._v(" "),a("tr",[a("td",[t._v("String")]),t._v(" "),a("td",[t._v("è‡ªåŠ¨æŒ‰ç…§ utf8 ç¼–ç è½¬æ¢ä¸º Bufferã€‚å¯¹äºåŒ…å«äº†å¤šå­—èŠ‚å­—ç¬¦çš„æ¶ˆæ¯ï¼Œ"),a("code",[t._v("offset")]),t._v(" å’Œ "),a("code",[t._v("length")]),t._v(" ä¼šæ ¹æ®å¯¹åº”çš„å­—èŠ‚é•¿åº¦è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸æ˜¯æ ¹æ®å­—ç¬¦çš„ä½ç½®")])]),t._v(" "),a("tr",[a("td",[t._v("Array")]),t._v(" "),a("td",[a("code",[t._v("offset")]),t._v(" å’Œ "),a("code",[t._v("length")]),t._v(" å¿…é¡»éƒ½ä¸èƒ½è¢«æŒ‡å®š")])])])]),t._v(" "),a("p",[a("strong",[t._v("address å‚æ•°")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("å‚æ•°ç±»å‹")]),t._v(" "),a("th",[t._v("è¯´æ˜")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("String")]),t._v(" "),a("td",[t._v("å€¼ä¸ºä¸»æœºåï¼Œåˆ™ DNS ä¼šè¢«ç”¨æ¥è§£æä¸»æœºçš„åœ°å€")])]),t._v(" "),a("tr",[a("td",[t._v("æœªæä¾›æˆ–éçœŸå€¼")]),t._v(" "),a("td",[t._v("åˆ™ "),a("code",[t._v("127.0.0.1")]),t._v("ï¼ˆç”¨äº udp4 socketï¼‰æˆ– "),a("code",[t._v("::1")]),t._v("ï¼ˆç”¨äº udp6 socketï¼‰ä¼šè¢«ä½¿ç”¨")])])])]),t._v(" "),a("p",[t._v("å¯ä»¥æŒ‡å®šä¸€ä¸ªå¯é€‰çš„ "),a("code",[t._v("callback")]),t._v(" æ–¹æ³•æ¥æ±‡æŠ¥ DNS é”™è¯¯æˆ–åˆ¤æ–­å¯ä»¥å®‰å…¨åœ°é‡ç”¨ "),a("code",[t._v("buf")]),t._v(" å¯¹è±¡çš„æ—¶æœºã€‚åœ¨ Node.js äº‹ä»¶å¾ªç¯ä¸­ï¼ŒDNS æŸ¥è¯¢ä¼šå¯¹å‘é€é€ æˆè‡³å°‘ä¸€ä¸ªæ—¶é—´ç‚¹çš„å»¶è¿Ÿã€‚")]),t._v(" "),a("p",[t._v("ç¡®å®šæ•°æ®åŒ…è¢«å‘é€çš„å”¯ä¸€æ–¹å¼å°±æ˜¯æŒ‡å®š "),a("code",[t._v("callback")]),t._v("ã€‚è‹¥ "),a("code",[t._v("callback")]),t._v(" è¢«æŒ‡å®šçš„æƒ…å†µä¸‹æœ‰é”™è¯¯å‘ç”Ÿï¼Œè¯¥é”™è¯¯ä¼šä½œä¸º "),a("code",[t._v("callback")]),t._v(" çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚è‹¥ "),a("code",[t._v("callback")]),t._v(" æœªè¢«æŒ‡å®šï¼Œè¯¥é”™è¯¯ä¼šä»¥ "),a("code",[t._v("error")]),t._v(" äº‹ä»¶çš„å½¢å¼æŠ•å°„åˆ° socket å¯¹è±¡ä¸Šã€‚")]),t._v(" "),a("p",[t._v("åç§»é‡å’Œé•¿åº¦æ˜¯å¯é€‰çš„ï¼Œä½†å¦‚æœå…¶ä¸­ä¸€ä¸ªè¢«æŒ‡å®šåˆ™å¦ä¸€ä¸ªä¹Ÿå¿…é¡»è¢«æŒ‡å®šã€‚å¦å¤–ï¼Œå®ƒä»¬åªåœ¨ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Buffer æˆ– Uint8Array çš„æƒ…å†µä¸‹æ‰èƒ½è¢«ä½¿ç”¨ã€‚")]),t._v(" "),a("h2",{attrs:{id:"åº”ç”¨åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" åº”ç”¨åœºæ™¯")]),t._v(" "),a("p",[t._v("UDP é€Ÿåº¦å¿«ï¼Œå¼€é”€ä½ï¼Œä¸ç”¨å°åŒ…/æ‹†åŒ…ï¼Œå…è®¸ä¸¢ä¸€éƒ¨åˆ†æ•°æ®ã€‚é€‚åˆç”¨äºç›‘æ§ç»Ÿè®¡ã€æ—¥å¿—æ•°æ®ä¸ŠæŠ¥ã€æµåª’ä½“é€šä¿¡ç­‰åœºæ™¯ã€‚ç›®å‰ Node.js çš„é¡¹ç›®ä¸­ä½¿ç”¨ UDP æ¯”è¾ƒæµè¡Œçš„æ˜¯ "),a("a",{attrs:{href:"https://github.com/etsy/statsd",target:"_blank",rel:"noopener noreferrer"}},[t._v("StatsD"),a("OutboundLink")],1),t._v(" ç›‘æ§æœåŠ¡ã€‚")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("å‚è€ƒèµ„æ–™ï¼š")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/api/dgram.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“– Node Documentation dgram API"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000011366156",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“ Node dgram æ¨¡å—å®ç° UDP é€šä¿¡"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);