(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{209:function(t,s,a){t.exports=a.p+"assets/img/create-child-process.35484212.png"},283:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"å­è¿›ç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å­è¿›ç¨‹"}},[t._v("#")]),t._v(" å­è¿›ç¨‹")]),t._v(" "),n("p",[t._v("å­è¿›ç¨‹ (Child Process) æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ Node.js çš„ "),n("code",[t._v("child_process")]),t._v(" æ¨¡å—è¡ç”Ÿå‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¹¶ä¸”çˆ¶å­è¿›ç¨‹ä½¿ç”¨ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿç›¸äº’ä¹‹é—´å¯ä»¥å¾ˆå®¹æ˜“åœ°äº¤æµã€‚")]),t._v(" "),n("p",[n("code",[t._v("child_process")]),t._v(" æ¨¡å—ä½¿æˆ‘ä»¬åœ¨ä¸€ä¸ªè¿è¡Œè‰¯å¥½çš„å­è¿›ç¨‹å†…è¿è¡Œä¸€äº›èƒ½å¤Ÿè¿›å…¥æ“ä½œç³»ç»Ÿçš„å‘½ä»¤ã€‚")]),t._v(" "),n("p",[t._v("çˆ¶è¿›ç¨‹å¯ä»¥æ§åˆ¶å­è¿›ç¨‹çš„è¾“å…¥æµï¼Œå¹¶ä¸”ç›‘å¬å®ƒçš„è¾“å‡ºæµã€‚ä¹Ÿå¯ä»¥æ§åˆ¶ä¼ é€’ç»™æ½œåœ¨çš„æ“ä½œç³»ç»Ÿå‘½ä»¤çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‚£ä¸ªå‘½ä»¤çš„è¾“å‡ºåšæˆ‘ä»¬æƒ³åšçš„äº‹æƒ…ã€‚æ¯”å¦‚ï¼šå¯ä»¥å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªçš„è¾“å…¥ï¼Œå› ä¸ºå“ªäº›å‘½ä»¤çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ä½¿ç”¨æµçš„å½¢å¼å‘ˆç°ç»™æˆ‘ä»¬ã€‚")]),t._v(" "),n("h2",{attrs:{id:"åˆ›å»ºå­è¿›ç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºå­è¿›ç¨‹"}},[t._v("#")]),t._v(" åˆ›å»ºå­è¿›ç¨‹")]),t._v(" "),n("p",[t._v("Node.js çš„ child_process å†…ç½®æ¨¡å—æä¾›äº†å‡ ç§åˆ›å»ºå­è¿›ç¨‹çš„å››ç§æ–¹å¼ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("child_process.spawn()")]),t._v("ï¼šé€‚ç”¨äºè¿”å›å¤§é‡æ•°æ®ï¼Œä¾‹å¦‚å›¾åƒå¤„ç†ï¼ŒäºŒè¿›åˆ¶æ•°æ®å¤„ç†")]),t._v(" "),n("li",[n("code",[t._v("child_process.exec()")]),t._v("ï¼šé€‚ç”¨äºå°é‡æ•°æ®ï¼ŒmaxBuffer é»˜è®¤å€¼ä¸º 200 * 1024 è¶…å‡ºè¿™ä¸ªé»˜è®¤å€¼å°†ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œæ•°æ®é‡è¿‡å¤§å¯é‡‡ç”¨ spawn")]),t._v(" "),n("li",[n("code",[t._v("child_process.execFile()")]),t._v("ï¼šç±»ä¼¼ "),n("code",[t._v("child_process.exec()")]),t._v("ï¼ŒåŒºåˆ«æ˜¯ä¸èƒ½é€šè¿‡ shell æ¥æ‰§è¡Œï¼Œä¸æ”¯æŒåƒ I/O é‡å®šå‘å’Œæ–‡ä»¶æŸ¥æ‰¾è¿™æ ·çš„è¡Œä¸º")]),t._v(" "),n("li",[n("code",[t._v("child_process.fork()")]),t._v("ï¼šè¡ç”Ÿæ–°çš„è¿›ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ V8 å®ä¾‹ã€å†…å­˜ï¼Œç³»ç»Ÿèµ„æºæ˜¯æœ‰é™çš„ï¼Œä¸å»ºè®®è¡ç”Ÿå¤ªå¤šçš„å­è¿›ç¨‹å‡ºæ¥ï¼Œé€šå¸¸æ ¹æ®ç³»ç»Ÿ CPU æ ¸å¿ƒæ•°è®¾ç½®")])]),t._v(" "),n("h3",{attrs:{id:"spawn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#spawn"}},[t._v("#")]),t._v(" spawn")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("child_process.spwan(command [, args] [, options])\n")])])]),n("p",[t._v("åˆ›å»ºçˆ¶å­è¿›ç¨‹é—´é€šä¿¡çš„ä¸‰ç§æ–¹å¼ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("è®©å­è¿›ç¨‹çš„ stdio å’Œå½“å‰è¿›ç¨‹çš„ stdio ä¹‹é—´å»ºç«‹ç®¡é“é“¾æ¥ "),n("code",[t._v("child.stdout.pipe(process.stdout)")])]),t._v(" "),n("li",[t._v("çˆ¶è¿›ç¨‹å­è¿›ç¨‹ä¹‹é—´å…±ç”¨ stdio")]),t._v(" "),n("li",[t._v("äº‹ä»¶ç›‘å¬")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" spawn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spawn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cwd æŒ‡å®šå­è¿›ç¨‹çš„å·¥ä½œç›®å½•ï¼Œé»˜è®¤å½“å‰ç›®å½•")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" child "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("spwan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ls'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-l'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" cwd"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/usr'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nchild"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" child"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸»è¿›ç¨‹ID 3243 å­è¿›ç¨‹ID 3244")]),t._v("\n")])])]),n("p",[t._v("é€šè¿‡ spawn åˆ›å»ºçš„å­è¿›ç¨‹ï¼Œç»§æ‰¿è‡ª EventEmitterï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸Šé¢è¿›è¡Œäº‹ä»¶ï¼ˆ"),n("code",[t._v("discount")]),t._v("ã€"),n("code",[t._v("error")]),t._v("ã€"),n("code",[t._v("close")]),t._v("ã€"),n("code",[t._v("message")]),t._v("ï¼‰çš„ç›‘å¬ã€‚åŒæ—¶å­è¿›ç¨‹å…·æœ‰ä¸‰ä¸ªè¾“å…¥è¾“å‡ºæµï¼šstdinã€stdoutã€stderrï¼Œé€šè¿‡è¿™ä¸‰ä¸ªæµï¼Œå¯ä»¥å®æ—¶è·å–å­è¿›ç¨‹çš„è¾“å…¥è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯ã€‚")]),t._v(" "),n("blockquote",[n("p",[t._v("è¿™ä¸ªæ–¹æ³•çš„æœ€ç»ˆå®ç°åŸºäº libuvï¼Œå‚è€ƒ"),n("a",{attrs:{href:"https://github.com/nodejs/node/blob/v10.14.2/src/process_wrap.cc#L256",target:"_blank",rel:"noopener noreferrer"}},[t._v("æºç "),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-cpp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-cpp"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨ libuv çš„ apiï¼Œåˆå§‹åŒ–ä¸€ä¸ªè¿›ç¨‹")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("uv_spawn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $wrap"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("process_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("h3",{attrs:{id:"exec"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#exec"}},[t._v("#")]),t._v(" exec")]),t._v(" "),n("p",[n("code",[t._v("exec")]),t._v(" æœ€ç»ˆè°ƒç”¨çš„å°±æ˜¯ä¸‹é¢çš„ "),n("code",[t._v("execFile")]),t._v(" æ–¹æ³•ï¼ˆ"),n("a",{attrs:{href:"https://segmentfault.com/a/1190000017804200#",target:"_blank",rel:"noopener noreferrer"}},[t._v("æºç "),n("OutboundLink")],1),t._v("ï¼‰ã€‚å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œ"),n("code",[t._v("exec")]),t._v(" ä¸­è°ƒç”¨çš„ "),n("code",[t._v("normalizeExecArgs")]),t._v(" æ–¹æ³•ä¼šå°† opts çš„ shell å±æ€§é»˜è®¤è®¾ç½®ä¸º "),n("code",[t._v("true")]),t._v("ã€‚")]),t._v(" "),n("p",[n("code",[t._v("exec")]),t._v(" ä¼šå°† spawn çš„è¾“å…¥è¾“å‡ºæµè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œé»˜è®¤ä½¿ç”¨ UTF-8 çš„ç¼–ç ï¼Œç„¶åä¼ é€’ç»™å›è°ƒå‡½æ•°ï¼Œä½¿ç”¨å›è°ƒæ–¹å¼åœ¨ Node.js ä¸­è¾ƒä¸ºç†Ÿæ‚‰ï¼Œæ¯”æµæ›´å®¹æ˜“æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½ä½¿ç”¨ "),n("code",[t._v("exec")]),t._v(" æ–¹æ³•æ‰§è¡Œä¸€äº› Shell å‘½ä»¤ï¼Œç„¶ååœ¨å›è°ƒä¸­è·å–è¿”å›å€¼ã€‚æœ‰ç‚¹éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œçš„ buffer æ˜¯æœ‰æœ€å¤§ç¼“å­˜åŒºçš„ï¼Œå¦‚æœè¶…å‡ºä¼šç›´æ¥è¢« kill æ‰ï¼Œå¯ç”¨é€šè¿‡ "),n("code",[t._v("maxBuffer")]),t._v(" å±æ€§è¿›è¡Œé…ç½®ï¼ˆé»˜è®¤ï¼š200 * 1024ï¼‰ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" exec "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("execFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("node")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stderr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stderr "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { error: null, stdout: 'v8.5.0\\n', stderr: '' }")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"execfile"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#execfile"}},[t._v("#")]),t._v(" execFile")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" execFile "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execFile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("execFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("node")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-v'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stderr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("llog")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" errpr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stderr "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { error: null, stdout: 'v8.5.0\\n', stderr: '' }")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"fork"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fork"}},[t._v("#")]),t._v(" fork")]),t._v(" "),n("p",[n("code",[t._v("fork")]),t._v(" æœ€åä¹Ÿæ˜¯è°ƒç”¨ "),n("code",[t._v("spwan")]),t._v(" æ¥åˆ›å»ºå­è¿›ç¨‹ï¼Œä½†æ˜¯ "),n("code",[t._v("fork")]),t._v(" æ˜¯ "),n("code",[t._v("spawn")]),t._v(" çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œç”¨äºè¡ç”Ÿæ–°çš„ Node.js è¿›ç¨‹ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ V8 å®ä¾‹ï¼Œæ‰€ä»¥æ‰§è¡Œ "),n("code",[t._v("fork")]),t._v(" æ–¹æ³•æ—¶éœ€è¦æŒ‡å®šä¸€ä¸ª JS æ–‡ä»¶ã€‚")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./worker.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fork ä¸€ä¸ªæ–°çš„å­è¿›ç¨‹")]),t._v("\n")])])]),n("p",[t._v("é€šè¿‡ "),n("code",[t._v("fork")]),t._v(" åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œçˆ¶å­è¿›ç¨‹ç›´æ¥ä¼šåˆ›å»ºä¸€ä¸ª IPCï¼ˆè¿›ç¨‹é—´ï¼‰é€šé“ï¼Œæ–¹ä¾¿çˆ¶å­è¿›ç¨‹ç›´æ¥é€šä¿¡ï¼Œåœ¨ JS å±‚ä½¿ç”¨ "),n("code",[t._v("process.send(message)")]),t._v(" å’Œ "),n("code",[t._v("process.on('message', msg => {})")]),t._v(" è¿›è¡Œé€šä¿¡ã€‚äºŒåœ¨åº•å±‚ï¼Œå®ç°è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼æœ‰å¾ˆå¤šï¼ŒNode.js çš„è¿›ç¨‹é—´é€šä¿¡åŸºäº libuv å®ç°ï¼Œä¸åŒæ“ä½œç³»ç»Ÿå®ç°æ–¹å¼ä¸ä¸€è‡´ï¼Œåœ¨ *unix ç³»ç»Ÿä¸­é‡‡ç”¨ Unix Domain Socket æ–¹å¼å®ç°ï¼ŒWindows ä¸­ä½¿ç”¨å‘½åç®¡é“çš„æ–¹å¼å®ç°ã€‚")]),t._v(" "),n("p",[t._v("å¸¸è§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ¶ˆæ¯é˜Ÿåˆ—")]),t._v(" "),n("li",[t._v("å…±äº«å†…å­˜")]),t._v(" "),n("li",[n("code",[t._v("pipe")])]),t._v(" "),n("li",[t._v("ä¿¡å·é‡")]),t._v(" "),n("li",[t._v("å¥—æ¥å­—")])]),t._v(" "),n("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯å¯¹ "),n("code",[t._v("spawn")]),t._v(" æ–¹æ³•çš„å¤ç”¨ï¼Œç„¶å "),n("code",[t._v("spawn")]),t._v(" æ–¹æ³•åº•å±‚è°ƒç”¨ libuv è¿›è¡Œè¿›ç¨‹çš„ç®¡ç†ã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:a(209),alt:"åˆ›å»ºå­è¿›ç¨‹"}})]),t._v(" "),n("h3",{attrs:{id:"å¼‚æ­¥-vs-åŒæ­¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥-vs-åŒæ­¥"}},[t._v("#")]),t._v(" å¼‚æ­¥ vs åŒæ­¥")]),t._v(" "),n("p",[t._v("å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå­è¿›ç¨‹çš„åˆ›å»ºæ˜¯å¼‚æ­¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸ä¼šé˜»å¡å½“å‰çš„äº‹ä»¶å¾ªç¯ï¼Œè¿™å¯¹äºæ€§èƒ½çš„æå‡å¾ˆæœ‰å¸®åŠ©ã€‚")]),t._v(" "),n("p",[t._v("å½“ç„¶ï¼Œæœ‰çš„æ—¶å€™ï¼ŒåŒæ­¥çš„æ–¹å¼ä¼šæ›´æ–¹ä¾¿ï¼ˆé˜»å¡äº‹ä»¶å¾ªç¯ï¼‰ï¼Œæ¯”å¦‚é€šè¿‡å­è¿›ç¨‹çš„æ–¹å¼æ¥æ‰§è¡Œ shell è„šæœ¬æ—¶ã€‚")]),t._v(" "),n("p",[t._v("Node.js åŒæ ·æä¾›åŒæ­¥çš„ç‰ˆæœ¬ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("spawnSync()")])]),t._v(" "),n("li",[n("code",[t._v("execSync()")])]),t._v(" "),n("li",[n("code",[t._v("execFileSync()")])])]),t._v(" "),n("h2",{attrs:{id:"åº”ç”¨åœºæ™¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" åº”ç”¨åœºæ™¯")]),t._v(" "),n("p",[t._v("å­è¿›ç¨‹çš„åº”ç”¨åœºæ™¯ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("è®¡ç®—å¯†é›†å‹ç³»ç»Ÿ")]),t._v(" "),n("li",[t._v("å‰ç«¯æ„å»ºå·¥å…·åˆ©ç”¨å¤šæ ¸ CPU å¹¶è¡Œè®¡ç®—ï¼Œæå‡æ„å»ºæ•ˆç‡")]),t._v(" "),n("li",[t._v("è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œå¦‚ï¼šPM2 ä¸­éƒ¨åˆ†åŠŸèƒ½")])]),t._v(" "),n("h2",{attrs:{id:"å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹"}},[t._v("#")]),t._v(" å­¤å„¿è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹")]),t._v(" "),n("blockquote",[n("p",[t._v("ç»å…¸é¢è¯•é¢˜ï¼šçˆ¶è¿›ç¨‹æˆ–å­è¿›ç¨‹çš„æ­»äº¡æ˜¯å¦ä¼šå½±å“å¯¹æ–¹? ä»€ä¹ˆæ˜¯å­¤å„¿è¿›ç¨‹?")])]),t._v(" "),n("p",[t._v("å­è¿›ç¨‹æ­»äº¡ä¸ä¼šå½±å“çˆ¶è¿›ç¨‹ï¼Œä¸è¿‡å­è¿›ç¨‹æ­»äº¡æ—¶ï¼ˆçº¿ç¨‹ç»„çš„æœ€åä¸€ä¸ªçº¿ç¨‹ï¼Œé€šå¸¸æ˜¯ã€Œé¢†å¤´ã€çº¿ç¨‹æ­»äº¡æ—¶ï¼‰ï¼Œä¼šå‘å®ƒçš„çˆ¶è¿›ç¨‹å‘é€æ­»äº¡ä¿¡å·ã€‚åä¹‹çˆ¶è¿›ç¨‹æ­»äº¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å­è¿›ç¨‹ä¹Ÿä¼šéšä¹‹æ­»äº¡ã€‚ä½†å¦‚æœæ­¤æ—¶çˆ¶è¿›ç¨‹å¯¹åº”çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­è¿›ç¨‹å¤„äºå¯è¿è¡Œæ€ã€åƒµæ­»çŠ¶æ€ç­‰ç­‰çš„è¯ï¼Œå­è¿›ç¨‹å°†è¢«ç³»ç»Ÿçš„ init è¿›ç¨‹æ”¶å…»ï¼ˆå¯¹åº”çš„ ppid ä¸º 1ï¼‰ï¼Œä»è€Œæˆä¸º"),n("strong",[t._v("å­¤å„¿è¿›ç¨‹")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("å¦å¤–ï¼Œå­è¿›ç¨‹æ­»äº¡çš„æ—¶å€™ï¼ˆå¤„äºâ€œç»ˆæ­¢çŠ¶æ€â€ï¼‰ï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰åŠæ—¶è°ƒç”¨ "),n("code",[t._v("wait()")]),t._v(" æˆ– "),n("code",[t._v("waitpid()")]),t._v(" æ¥è¿”å›æ­»äº¡è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ï¼Œæ­¤æ—¶å­è¿›ç¨‹è¿˜æœ‰ä¸€ä¸ª PCB æ®‹ç•™åœ¨è¿›ç¨‹è¡¨ä¸­ï¼Œè¢«ç§°ä½œ"),n("strong",[t._v("åƒµå°¸è¿›ç¨‹")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ğŸŒ° "),n("strong",[t._v("å­¤å„¿è¿›ç¨‹ ç¤ºä¾‹ä»£ç ")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3002")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nworker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker process created, pid: %s ppid: %s'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ppid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œä¸»è¿›ç¨‹é€€å‡ºï¼Œæ­¤æ—¶åˆ›å»ºçš„ worker è¿›ç¨‹ä¼šæˆä¸ºå­¤å„¿è¿›ç¨‹")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•å½“å‰å·¥ä½œè¿›ç¨‹ pid åŠçˆ¶è¿›ç¨‹ ppid")]),t._v("\n  res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'I am worker, pid: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("', ppid: '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ppid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sendHandle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sendHandle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("æ§åˆ¶å°è¿›è¡Œè°ƒè¯•ï¼Œè¾“å‡ºå½“å‰å·¥ä½œè¿›ç¨‹ pid å’Œçˆ¶è¿›ç¨‹ ppid")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ node master\nworker process created, pid: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32971")]),t._v(" ppid: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32970")]),t._v("\n")])])]),n("p",[t._v("ç”±äºåœ¨ master.js é‡Œé€€å‡ºäº†çˆ¶è¿›ç¨‹ï¼Œæ´»åŠ¨ç›‘è§†å™¨æ‰€æ˜¾ç¤ºçš„ä¹Ÿå°±åªæœ‰å·¥ä½œè¿›ç¨‹ã€‚")]),t._v(" "),n("p",[t._v("å†æ¬¡éªŒè¯ï¼Œæ‰“å¼€æ§åˆ¶å°è°ƒç”¨æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°å·¥ä½œè¿›ç¨‹ 32971 å¯¹åº”çš„ ppid ä¸º 1ï¼ˆä¸º init è¿›ç¨‹ï¼‰ï¼Œæ­¤æ—¶å·²ç»æˆä¸ºäº†å­¤å„¿è¿›ç¨‹ã€‚")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://127.0.0.1:3000\nI am worker, pid: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32971")]),t._v(", ppid: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),n("hr"),t._v(" "),n("p",[n("strong",[t._v("å‚è€ƒèµ„æ–™ï¼š")])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/36678971",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“ Node.js å­è¿›ç¨‹ï¼šä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000017804200",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“ Node.js çš„è¿›ç¨‹ç®¡ç†"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://blog.csdn.net/weixin_34161029/article/details/87998135",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ“ Node.js å­è¿›ç¨‹ä¸åº”ç”¨åœºæ™¯"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);